function visual (action, option1);

% for help use the command 'help visualhelp'

if nargin < 1; action  = 'initialize'; end;
if nargin < 2; option1 = 'none';       end;

switch action;

    case 'initialize'

        oldFigNumber  = watchon;

        % -----------------------------------
        % --- Create a full-screen figure ---
        % -----------------------------------

        ScreenSize    = get (0,'Screensize');
        ScreenSize(1) = ScreenSize(1)+2;
        ScreenSize(2) = ScreenSize(2)+40;
        ScreenSize(3) = ScreenSize(3)-5;
        ScreenSize(4) = ScreenSize(4)-90;

        figNumber = figure ('Name','Visualization of GNSS-related design parameters', ...
            'Position',ScreenSize,'Color',[0 0 0],'NumberTitle','off','Visible','off');

        % ---------------------------------------
        % --- Axis, for the plot and colorbar ---
        % ---------------------------------------
        axes('position',[0.875 0.005 0.15 0.05])
        [im,map] = imread('logo.png');
        image(im)
        axis image
        axis off
        
        hf = axes ('units','normalized', 'Position',[0.09 0.07 0.75 0.4], ...
            'Fontsize',8,'Color',[1 1 1], 'XColor',[1 1 1], 'YColor',[1 1 1], ...
            'Xgrid','on','Ygrid','on', 'Xtick',[-180:30:180],'Ytick',[-90:30:90], ...
            'Box','on','Visible','on','Tag','PictureAxis');

        hc = axes ('units','normalized', 'Position',[0.87 0.07 0.040 0.40], ...
            'Color',[1 1 1], 'XColor',[1 1 1], 'YColor',[1 1 1],...
            'Fontsize', 8,'Xtick',[],'Visible','off','Tag','ColorBarAxis');
        
            
        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'FontWeight','Bold',...
            'Position',[0.005 0.003 0.4 0.025], ...
            'String','Copyright 2006 Delft Institute of Earth Observation and Space Systems (DEOS)', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',[0 0 0],...
            'Foregroundcolor',[1 1 1]);


        % ----------------------------------------
        % --- Information for all edit-boxes   ---
        % ----------------------------------------

        editWidth           = 0.1;
        editHeight          = 0.025;
        editSpacing         = 0.001;
        editBackgroundColor = [1.00 1.00 1.00];
        textBackgroundColor = [0 0.70 0.70];


        % --------------------
        % --- system-frame ---
        % --------------------

        frmBorder      = 0.015;
        frmPosition    = zeros(1,4);
        frmPosition(1) = 0.0575;
        frmPosition(2) = 1 - (10*editHeight + 9*editSpacing + 3*frmBorder);
        frmPosition(3) = 2*editWidth + 1*editSpacing + 2*frmBorder;
        frmPosition(4) = 10*editHeight + 9*editSpacing + 2*frmBorder;

        h = uicontrol ( 'Style','frame','Units','normalized', ...
            'Position',frmPosition,'BackgroundColor', [0 0.70 0.70]);

        % -----------------
        % system choice ---
        % -----------------

        textLeft1   = frmPosition(1) + frmBorder;
        textBottom = 1 - 2*frmBorder - (editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'FontWeight','Bold',...
            'Position',[textLeft1 textBottom+editSpacing editWidth editHeight], ...
            'String','system:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textLeft   = textLeft1 + (editWidth+editSpacing);
        textBottom = 1 - 2*frmBorder - (editHeight+editSpacing);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','GPS|GLONASS|GALILEO|GPS+GALILEO', ...
            'Tag','system',...
            'Callback',['visual syst'],...
            'Value',1);

        textBottom = 1 - 2*frmBorder - 2*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','almanac file', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 2*(editHeight+editSpacing);
        almanac = 'yumaGPS.txt';
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String',almanac,...
            'Tag','almanac');

        textBottom = 1 - 2*frmBorder - 3*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','almanac file 2', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 3*(editHeight+editSpacing);
        almanac2 = 'yumaGAL.txt';
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String',almanac2,...
            'Tag','almanac2',...
            'Enable','Off');


        textBottom = 1 - 2*frmBorder - 4*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','start date & time', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 4*(editHeight+editSpacing);
        editWidthd = 0.65*editWidth;
        
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidthd editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String',datestr(now,1),...
            'Tag','startdate');
        
        textLeftt = textLeft + 0.65*editWidth;
        editWidtht = 0.35*editWidth;
        
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeftt textBottom editWidtht editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0:00',...
            'Tag','starttime');        
            
        textBottom = 1 - 2*frmBorder - 5*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','end date & time', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 5*(editHeight+editSpacing);

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidthd editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String',datestr(now,1),...
            'Tag','enddate');
        
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeftt textBottom editWidtht editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','24:00',...
            'Tag','endtime'); 
        
        textBottom = 1 - 2*frmBorder - 6*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','number of epochs', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 6*(editHeight+editSpacing);

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','1',...
            'Tag','nepochs',...
            'Callback',['visual nepochs']);


        textBottom = 1 - 2*frmBorder - 7*(editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','time interval [s]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = 1 - 2*frmBorder - 7*(editHeight+editSpacing);

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','300',...
            'Tag','intv');


        textBottom = textBottom - (editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','cutoff elevation', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);


        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','15',...
            'Tag','cutoff');

        textBottom = textBottom - (editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','scenario', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','single point|single baseline|geometry-free',...
            'Tag','scenario',...
            'Value',2);

        textBottom = textBottom - (editHeight+editSpacing);

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','receiver', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','stationary|roving',...
            'Tag','receiver',...
            'Value',1);

        % -------------------------
        % --- observation-frame ---
        % -------------------------
        frmBorder      = 0.015;
        frmPosition    = zeros(1,4);
        frmPosition(1) = 2*editWidth + editSpacing + 3*frmBorder + 0.0575;
        frmPosition(2) = 1 - (10*editHeight + 9*editSpacing + 3*frmBorder);
        frmPosition(3) = 4*editSpacing + 26*frmBorder;
        frmPosition(4) = 10*editHeight + 9*editSpacing + 2*frmBorder;

        h = uicontrol ('Style','frame','Units','normalized', ...
            'Position',frmPosition,'BackgroundColor', [0 0.70 0.70]);

        % ----------------------
        % observation choice ---
        % ----------------------
        editWidth1  = 5*frmBorder;
        editWidth2  = 3*frmBorder;

        textLeft1   = frmBorder + frmPosition(1);
        textLeft2   = textLeft1 + 5*frmBorder;        
        textLeft3   = textLeft2 + 3*frmBorder + editSpacing;  
        textLeft4   = textLeft3 + 3*frmBorder + editSpacing;
        textLeft5   = textLeft4 + 4*frmBorder;
        textLeft6   = textLeft5 + 3*frmBorder + editSpacing;  
        textLeft7   = textLeft6 + 3*frmBorder + editSpacing; 
         
        textBottom1 = frmPosition(2) + frmPosition(4) - editHeight - frmBorder;

        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','Bold',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth1 editHeight], ...
            'String','observations:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);


        h = uicontrol ( ...
            'Style','checkbox', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom1 editWidth2 editHeight], ...
            'String','phase', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor,...
            'Tag','phasesel',...
            'Callback',['visual obstype phaseon'],...
            'Value',1);

        h = uicontrol ( ...
            'Style','checkbox', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom1 editWidth2 editHeight], ...
            'String','code', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor,...
            'Tag','codesel',...
            'Callback',['visual obstype codeon'],...
            'Value',1);
        
        textBottom = textBottom1 - editHeight -editSpacing;       
        
        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'String','st.dev.[m]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);
   
        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'String','a [m]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'String','e0 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor); 
        
         h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'String','st.dev.[m]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);
   
        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'String','a [m]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','normal',...
            'Fontsize',8,...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'String','e0 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor); 
        
        textBottom2 = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom2 editWidth1 editHeight], ...
            'String','L1', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pL1', ...
            'Value',1,...
            'Enable','On');

        textBottom = textBottom2 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','L2', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pL2', ...
            'Value',1,...
            'Callback',['visual rectype noncc'],...
            'Enable','On');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','L5', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pL5', ...
            'Value',0,...
            'Enable','On');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','L2-L1', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pL2L1', ...
            'Callback',['visual rectype cc'], ...
            'Value',0,...
            'Enable','On');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','E2-L1-E1', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pE1', ...
            'Value',0,...
            'Enable','Off',...
            'Visible','On');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','E5a', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pE5a', ...
            'Value',0,...
            'Enable','Off');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','E5b', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pE5b', ...
            'Value',0,...
            'Enable','Off');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','E6', ...
            'BackgroundColor',textBackgroundColor, ...
            'Tag','pE6', ...
            'Value',0,...
            'Enable','Off');

        %%% standard deviations

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.003',...
            'Tag','sigp1',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ap1',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ep1',...
            'Enable','On');
        
        textBottom = textBottom2 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.003',...
            'Tag','sigp2',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ap2',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ep2',...
            'Enable','On');
        
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.003',...
            'Tag','sigp3',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ap3',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ep3',...
            'Enable','On');
        
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.003',...
            'Tag','sigp4',...
            'Enable','On',...
            'Visible','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ap4',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ep4',...
            'Enable','On');
        
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.3',...
            'Tag','sigc1',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ac1',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom2 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ec1',...
            'Enable','On');
        
        textBottom = textBottom2 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.3',...
            'Tag','sigc2',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ac2',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ec2',...
            'Enable','On');
    
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.3',...
            'Tag','sigc3',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ac3',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ec3',...
            'Enable','On');
   
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0.4',...
            'Tag','sigc4',...
            'Enable','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','0',...
            'Tag','ac4',...
            'Enable','On');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','10',...
            'Tag','ec4',...
            'Enable','On');
   
        textBottomb = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.003',...
            'Tag','sigp1b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ap1b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ep1b',...
            'Enable','Off');
   
        textBottom = textBottomb - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.003',...
            'Tag','sigp2b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ap2b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ep2b',...
            'Enable','Off');
  
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.003',...
            'Tag','sigp3b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ap3b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ep3b',...
            'Enable','Off');
  
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8],...
            'String','0.003',...
            'Tag','sigp4b',...
            'Enable','Off',...
            'Visible','On');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ap4b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ep4b',...
            'Enable','Off');
  
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.3',...
            'Tag','sigc1b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ac1b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottomb editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ec1b',...
            'Enable','Off');
  
        textBottom = textBottomb - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.3',...
            'Tag','sigc2b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ac2b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ec2b',...
            'Enable','Off');
  
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.3',...
            'Tag','sigc3b',...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ac3b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ec3b',...
            'Enable','Off');
  
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft5 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0.3',...
            'Tag','sigc4b',...
            'Enable','Off');
  
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft6 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','0',...
            'Tag','ac4b',...
            'Enable','Off');
 
        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft7 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[.8 .8 .8], ...
            'String','10',...
            'Tag','ec4b',...
            'Enable','Off');
        
  
        % --------------------
        % --- output frame ---
        % --------------------  
        
        frmBorder      = 0.015;
        frmPosition    = zeros(1,4);
        frmPosition(1) = 2*editWidth + 5*editSpacing + 30*frmBorder + 0.0575;
        frmPosition(2) = 1 - (10*editHeight + 9*editSpacing + 3*frmBorder);
        frmPosition(3) = 2*editWidth + 1*editSpacing + 2*frmBorder;
        frmPosition(4) = 10*editHeight + 9*editSpacing + 2*frmBorder;


        h = uicontrol (...
            'Style','frame', ...
            'Units','normalized', ...
            'Position',frmPosition, ...
            'BackgroundColor', [0 0.70 0.70]);

        textLeft1   = frmBorder + frmPosition(1);
        textBottom1 = frmPosition(2) + frmPosition(4) - editHeight - frmBorder;

        h = uicontrol ( ...
            'Style','Text',...
            'FontWeight','Bold',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth editHeight], ...
            'String','output:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textLeft2 = textLeft1 + editWidth + editSpacing;

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom1 editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','MDB|MDE|BNR|success rate|biased success rate|MDE + success rates|PDOP|GDOP|number of satellites|satellite tracks',...
            'Tag','output',...
            'Callback',['visual output'],...
            'Value',9);

        textBottom = textBottom1 - 2*editHeight -2*editSpacing;

        h = uicontrol ( ...
            'Style','text',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','type of error', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol ( ...
            'Style','popupmenu',...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth editHeight], ...
            'String','carrier slip|code outlier', ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8],...
            'Tag','errtype',...
            'Enable','Off',...
            'Value',2);
        
        textBottom = textBottom - editHeight -editSpacing;        
        
        h = uicontrol (...
            'Style','text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'HorizontalAlignment','left', ...
            'String','frequency',...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','L1|L2|L5',...
            'Tag','outputfreq',...   
            'Value',1,...
            'Enable','Off');

        textBottom = textBottom - editHeight -editSpacing;  
        
        h = uicontrol (...
            'Style','text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'HorizontalAlignment','left', ...
            'String','epoch',...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','1',...
            'Tag','startepoch',...
            'Enable','Off');
        
        textBottom = textBottom - 2*editHeight -2*editSpacing;

        h = uicontrol ( ...
            'Style','Checkbox', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom 2*editWidth editHeight], ...
            'BackgroundColor',textBackgroundColor,...
            'String','save output to file', ...
            'HorizontalAlignment','left', ...
            'Value',1,...
            'Tag','saveout');
        
          h = uicontrol (...
            'Style','edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[1 1 1], ...
            'String','tmp.mat',...
            'Tag','filename',...
            'Enable','On');      
        
        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Checkbox', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom 2*editWidth editHeight], ...
            'BackgroundColor',textBackgroundColor,...
            'String','plot output in new window', ...
            'HorizontalAlignment','left', ...
            'Tag','plotnew',...
            'Value',1);
        
        % ---------------------------
        % --- atmosphere frame ---
        % ---------------------------
        frmBorder2     = 0.015;
        frmPosition    = zeros(1,4);
        frmPosition(1) = 0.0575;
        frmPosition(2) = 1 - (15.5*editHeight + 11*editSpacing + 6*frmBorder);
        frmPosition(3) = 2*editWidth + 1*editSpacing + 2*frmBorder;
        frmPosition(4) = 5.5*editHeight + 3*editSpacing + 2*frmBorder;

        h = uicontrol ('Style','frame','Units','normalized', ...
            'Position',frmPosition,'BackgroundColor', [0 0.70 0.70]);

        textLeft1  = frmBorder + frmPosition(1);
        textBottom = frmPosition(2) + frmPosition(4) - editHeight - frmBorder2;

        h = uicontrol ( ...
            'Style','Text', ...
            'FontWeight','Bold',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','ionosphere:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textLeft  = textLeft1 + editWidth + editSpacing;

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','fixed|float|weighted',...
            'Tag','ioncase',...
            'Callback',['visual ionoweight'],...
            'Value',1);

        textBottom1 = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth editHeight], ...
            'String','st.dev. [m]', ...
            'BackgroundColor',textBackgroundColor, ...
            'Callback',['visual ionoweight sigion'], ...
            'Tag','sigion', ...
            'Value',1,...
            'Enable','Off');

        textBottom = textBottom1 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','baseline [km]', ...
            'BackgroundColor',textBackgroundColor, ...
            'Callback',['visual ionoweight baseline'], ...
            'Tag','baseline', ...
            'Value',0,...
            'Enable','Off');

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom1 editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','0',...
            'Tag','sdionweight',...
            'Enable','Off');

        textBottom = textBottom1 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','10',...
            'Tag','blionweight',...
            'Enable','Off');

        textBottom = textBottom - 1.5*editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Text', ...
            'FontWeight','Bold',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth editHeight], ...
            'String','troposphere:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','fixed|float',...
            'Tag','tropocase',...
            'Callback',['visual tropo'],...
            'Value',1);

        textBottom1 = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth editHeight], ...
            'String','mapping function', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft textBottom1 editWidth editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','1/cos(z)|Ifadis',...
            'Tag','mapfun',...
            'Callback',['visual tropo'],...
            'Value',1,...
            'Enable','Off');


        % ----------------------------
        % location
        % ----------------------------
        frmPosition    = zeros(1,4);
        frmPosition(1) = 2*editWidth + 1*editSpacing + 3*frmBorder + 0.0575;
        frmPosition(2) = 1 - (15.5*editHeight + 11*editSpacing + 6*frmBorder);
        frmPosition(3) = 4*editSpacing + 26*frmBorder;
        frmPosition(4) = 5.5*editHeight + 3*editSpacing + 2*frmBorder;

        h = uicontrol ('Style','frame', 'Units','normalized', ...
            'Position',frmPosition,'BackgroundColor', [0 0.70 0.70]);

        % -------------------
        % location choice ---
        % -------------------

        textLeft1   = frmPosition(1) + frmBorder;
        textLeft2   = textLeft1 + 5*frmBorder;        
        textLeft3   = textLeft2 + 8*frmBorder + 2*editSpacing; 
        textLeft4   = textLeft3 + 5*frmBorder + editSpacing;  
        
        editWidth1  = 5*frmBorder;
        editWidth2  = 6*frmBorder + editSpacing;
        
        textBottom = frmPosition(2) + frmPosition(4) - editHeight - frmBorder2;

        h = uicontrol ( ...
            'Style','Text', ...
            'FontWeight','Bold',...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','location:', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Popupmenu', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',editBackgroundColor, ...
            'String','one point|area|world',...
            'Callback',['visual location'], ...
            'Tag','locchoice',...
            'Value',3);

        h = uicontrol ( ...
            'Style','Text', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth1 editHeight], ...
            'String','resolution [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[1 1 1], ...
            'String','5',...
            'Tag','resol',...
            'Enable','On');

        textBottom1 = textBottom - editHeight - editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth1 editHeight], ...
            'String','point in map', ...
            'BackgroundColor',textBackgroundColor, ...
            'Callback',['visual coordinates point'], ...
            'Tag','point', ...
            'Value',1,...
            'Enable','Off');
        
         h = uicontrol ( ...
            'Style','Text', ...
            'FontWeight','normal',...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom1 editWidth1 editHeight], ...
            'String','station height [m]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom1 editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[1 1 1], ...
            'String','0',...
            'Tag','height');       

        textBottom1 = textBottom1 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','radiobutton', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom1 editWidth1 editHeight], ...
            'String','type:', ...
            'BackgroundColor',textBackgroundColor, ...
            'Callback',['visual coordinates type'], ...
            'Tag','type', ...
            'Value',0,...
            'Enable','Off');

        textBottom =  textBottom1 - editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','latitude 1 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft1 textBottom editWidth1 editHeight], ...
            'String','longitude 1 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = textBottom1 - editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth1 editHeight], ...
            'String','latitude 2 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol ( ...
            'Style','Text', ...
            'Units','normalized', ...
            'Position',[textLeft3 textBottom editWidth1 editHeight], ...
            'String','longitude 2 [deg]', ...
            'HorizontalAlignment','left', ...
            'BackgroundColor',textBackgroundColor);

        textBottom = textBottom1 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','50',...
            'Tag','lat1',...
            'Enable','Off');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft2 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','3',...
            'Tag','long1',...
            'Enable','Off');

        textBottom = textBottom1 - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','52',...
            'Tag','lat2',...
            'Enable','Off');

        textBottom = textBottom - editHeight -editSpacing;

        h = uicontrol (...
            'Style','Edit', ...
            'Units','normalized', ...
            'Position',[textLeft4 textBottom editWidth2 editHeight], ...
            'HorizontalAlignment','center', ...
            'BackgroundColor',[0.8 0.8 0.8], ...
            'String','5',...
            'Tag','long2',...
            'Enable','Off');
        
        % ------------------------------------------
        % --- Information for all action buttons ---
        % ------------------------------------------

        LabelColor = [0.8 0.8 0.8];
        yInitPos   = 0.90;
        xPos       = 0.88;
        btnWidth   = editWidth;
        btnHeight  = 0.03;
        btnSpacing = 0.01;

        % ------------------------
        % --- The button-frame ---
        % ------------------------

        frmBorder      = 0.015;
        frmPosition    = zeros(1,4);
        frmPosition(1) = 2*editWidth + 5*editSpacing + 30*frmBorder + 0.0575;
        frmPosition(2) = 1 - (15.5*editHeight + 11*editSpacing + 6*frmBorder);
        frmPosition(3) = 2*editWidth + 1*editSpacing + 2*frmBorder;
        frmPosition(4) = 5.5*editHeight + 3*editSpacing + 2*frmBorder;

        h = uicontrol ('Style','frame', 'Units','normalized', ...
            'Position',frmPosition, 'BackgroundColor', [0 0.70 0.7]);

        % --------------------
        % --- Close button ---
        % --------------------

        btnLeft  = frmPosition(1) + 0.01 + btnWidth + btnSpacing;
        btnBottom =  frmPosition(2)  + frmBorder + editHeight + editSpacing;
        btnPosition = [btnLeft btnBottom btnWidth btnHeight];
        CloseHndl = uicontrol ( 'Style','Push', ...
            'Units','normalized','Position',btnPosition, ...
            'String','CLOSE','Backgroundcolor',[0 0.82 0.82],'Callback','close(gcf)');

        % -------------------
        % --- Info button ---
        % -------------------

        btnBottom1 =   frmPosition(2)  + frmBorder + 3*editHeight + 3*editSpacing;
        btnPosition = [btnLeft btnBottom1 btnWidth btnHeight];
        InfoHndl = uicontrol ( 'Style','Push', ...
            'Units','normalized', 'Position',btnPosition,'Backgroundcolor',[0 0.82 0.82], ...
            'String','HELP','Callback','visual(''info'')');

        % -----------------------
        % --- defaults button ---
        % -----------------------
        btnLeft  = frmPosition(1) + 0.01;
        btnPosition = [btnLeft btnBottom btnWidth btnHeight];

        InfoHndl = uicontrol ('Style','Push', 'Units','normalized', ...
            'Position',btnPosition,'String','DEFAULTS','Backgroundcolor',[0 0.82 0.82], ...
            'Callback',['visual defaults']);


        % ---------------
        % --- compute ---
        % ---------------
        btnPosition = [btnLeft btnBottom1 btnWidth btnHeight];
        InfoHndl = uicontrol ( 'Style','Push','Units','normalized','Backgroundcolor',[0 0.82 0.82], ...
            'Position',btnPosition, 'String','APPLY','Callback',['visual compute']);     

        %__________________________________________________________________________________

        visual ('initialFigure','now');

        % --------------------------------
        % --- activate user-interface ----
        % --------------------------------

        hndlList=[CloseHndl InfoHndl];
        set(figNumber,'Visible','on','UserData',hndlList);

        watchoff(oldFigNumber);
        figure(figNumber);
        h1 = msgbox ('Click left mouse button in figure to zoom in, right mouse button to zoom out');

    case 'compute'

        visualcompute
        
    case 'syst'
        SYSTEM = get(findobj(gcf,'Tag','system'),'Value');
        set(findobj(gcf,'Tag','codesel'),'Value',1);
        set(findobj(gcf,'Tag','phasesel'),'Value',1);
        if SYSTEM < 4
            set(findobj(gcf,'Tag','almanac2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','yumaGAL.txt');
        end
        if SYSTEM==1
            almanac = ['yumaGPS.txt'];
        elseif SYSTEM==2
            almanac = ['yumaGLO.txt'];
        elseif SYSTEM==3
            almanac = ['yumaGAL.txt'];
        elseif SYSTEM==4
            set(findobj(gcf,'Tag','almanac2'),'Enable','On','Backgroundcolor',[1 1 1],'String','yumaGAL.txt');
            almanac = ['yumaGPS.txt'];
        end

        set(findobj(gcf,'Tag','almanac'),'String',almanac );

        if SYSTEM<3

            set(findobj(gcf,'Tag','pE1'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pE5a'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pE5b'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pE6'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','sigp1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigp2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigp3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigp4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigc1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigc2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigc3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','sigc4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ap1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ap2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ap3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ap4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ac1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ac2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ac3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ac4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);           
            set(findobj(gcf,'Tag','ep1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ep2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ep3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ep4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ec1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ec2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ec3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ec4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);  
            set(findobj(gcf,'Tag','sigp1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
            set(findobj(gcf,'Tag','sigc1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');
            set(findobj(gcf,'Tag','sigp2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
            set(findobj(gcf,'Tag','sigc2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');

            set(findobj(gcf,'Tag','ap1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
            set(findobj(gcf,'Tag','ac1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
            set(findobj(gcf,'Tag','ap2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
            set(findobj(gcf,'Tag','ac2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');

            set(findobj(gcf,'Tag','ep1'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
            set(findobj(gcf,'Tag','ec1'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
            set(findobj(gcf,'Tag','ep2'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
            set(findobj(gcf,'Tag','ec2'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');

            set(findobj(gcf,'Tag','pL1'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pL2'),'Value',1,'Enable','On');

            if SYSTEM ==1

                set(findobj(gcf,'Tag','pL5'),'Value',0,'Enable','On');
                set(findobj(gcf,'Tag','pL2L1'),'Value',0,'Enable','On');
                set(findobj(gcf,'Tag','ep3'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
                set(findobj(gcf,'Tag','ec3'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
                set(findobj(gcf,'Tag','ep4'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
                set(findobj(gcf,'Tag','ec4'),'Enable','On','Backgroundcolor',[1 1 1],'String','10');
                set(findobj(gcf,'Tag','ap3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
                set(findobj(gcf,'Tag','ac3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
                set(findobj(gcf,'Tag','ap4'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
                set(findobj(gcf,'Tag','ac4'),'Enable','On','Backgroundcolor',[1 1 1],'String','0');
                set(findobj(gcf,'Tag','sigp3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
                set(findobj(gcf,'Tag','sigc3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');
                set(findobj(gcf,'Tag','sigp4'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
                set(findobj(gcf,'Tag','sigc4'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.4');

            else

                set(findobj(gcf,'Tag','pL5'),'Value',0,'Enable','Off');
                set(findobj(gcf,'Tag','pL2L1'),'Value',0,'Enable','Off');
                set(findobj(gcf,'Tag','sigp3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0.003');
                set(findobj(gcf,'Tag','sigc3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0.3');
                set(findobj(gcf,'Tag','sigp4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0.003');
                set(findobj(gcf,'Tag','sigc4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0.4');
                set(findobj(gcf,'Tag','ep3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                set(findobj(gcf,'Tag','ec3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                set(findobj(gcf,'Tag','ep4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                set(findobj(gcf,'Tag','ec4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                set(findobj(gcf,'Tag','ap3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                set(findobj(gcf,'Tag','ac3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                set(findobj(gcf,'Tag','ap4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                set(findobj(gcf,'Tag','ac4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');

            end

        elseif SYSTEM == 3

            set(findobj(gcf,'Tag','pE1'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pE5a'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pE5b'),'Value',0,'Enable','On');
            set(findobj(gcf,'Tag','pE6'),'Value',0,'Enable','On');
            set(findobj(gcf,'Tag','sigp1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp1'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
            set(findobj(gcf,'Tag','sigc1'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
            set(findobj(gcf,'Tag','sigp2'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
            set(findobj(gcf,'Tag','sigc2'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
            set(findobj(gcf,'Tag','sigp3'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
            set(findobj(gcf,'Tag','sigc3'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
            set(findobj(gcf,'Tag','sigp4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
            set(findobj(gcf,'Tag','sigc4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.4');
            set(findobj(gcf,'Tag','pL1'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pL2'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pL5'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','pL2L1'),'Value',0,'Enable','Off');
            set(findobj(gcf,'Tag','ep3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ec3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ep4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ec4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ap3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ac3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ap4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ac4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ep1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ec1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ep2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ec2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
            set(findobj(gcf,'Tag','ap1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ac1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ap2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ac2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
            set(findobj(gcf,'Tag','ap1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac4b'),'Enable','On','Backgroundcolor',[1 1 1]);           
            set(findobj(gcf,'Tag','ep1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec4b'),'Enable','On','Backgroundcolor',[1 1 1]);  

        elseif SYSTEM ==4

            set(findobj(gcf,'Tag','pE1'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pE5a'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pE5b'),'Value',0,'Enable','On');
            set(findobj(gcf,'Tag','pE6'),'Value',0,'Enable','On');
            set(findobj(gcf,'Tag','sigp1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigp4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','sigc4b'),'Enable','On','Backgroundcolor',[1 1 1]);

            set(findobj(gcf,'Tag','sigp1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
            set(findobj(gcf,'Tag','sigc1'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');
            set(findobj(gcf,'Tag','sigp2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
            set(findobj(gcf,'Tag','sigc2'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');
            set(findobj(gcf,'Tag','sigp3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.003');
            set(findobj(gcf,'Tag','sigc3'),'Enable','On','Backgroundcolor',[1 1 1],'String','0.3');
            set(findobj(gcf,'Tag','sigp4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
            set(findobj(gcf,'Tag','sigc4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.4');
            set(findobj(gcf,'Tag','pL1'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pL2'),'Value',1,'Enable','On');
            set(findobj(gcf,'Tag','pL5'),'Value',0,'Enable','On');
            set(findobj(gcf,'Tag','pL2L1'),'Value',0,'Enable','Off');

            set(findobj(gcf,'Tag','ap1'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap2'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap3'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ac1'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac2'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac3'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);           
            set(findobj(gcf,'Tag','ep1'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep2'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep3'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','ec1'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec2'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec3'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8]); 
            set(findobj(gcf,'Tag','ap1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ap4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ac4b'),'Enable','On','Backgroundcolor',[1 1 1]);           
            set(findobj(gcf,'Tag','ep1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ep4b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec1b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec2b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec3b'),'Enable','On','Backgroundcolor',[1 1 1]);
            set(findobj(gcf,'Tag','ec4b'),'Enable','On','Backgroundcolor',[1 1 1]); 
            
        end

        visual('output');

    case 'obstype'
        SYSTEM = get(findobj(gcf,'Tag','system'),'Value');
        
        switch option1
            case 'codeon'
                selc   = get(findobj(gcf,'Tag','codesel'),'Value');
                if selc == 0
                    if SYSTEM ~=3
                        set(findobj(gcf,'Tag','ec1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ec2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ac1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ac2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','sigc1'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        set(findobj(gcf,'Tag','sigc2'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');

                        if SYSTEM ~=2
                            set(findobj(gcf,'Tag','ec3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                            set(findobj(gcf,'Tag','ac3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                            set(findobj(gcf,'Tag','sigc3'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        end
                        if SYSTEM == 1
                            set(findobj(gcf,'Tag','ec4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                            set(findobj(gcf,'Tag','ac4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                            set(findobj(gcf,'Tag','sigc4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.4');
                       end
                        
                    end
                    if SYSTEM > 2
                        set(findobj(gcf,'Tag','ec3b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ec4b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ac3b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ac4b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ec1b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ec2b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ac1b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ac2b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','sigc1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        set(findobj(gcf,'Tag','sigc2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        set(findobj(gcf,'Tag','sigc3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        set(findobj(gcf,'Tag','sigc4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.4');
                    end
                else
                    
                    if SYSTEM ~=3
                        set(findobj(gcf,'Tag','ec1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ec2'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac2'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc2'),'Enable','On','Backgroundcolor',[1 1 1]);

                        if SYSTEM ~=2
                            set(findobj(gcf,'Tag','ec3'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','ac3'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','sigc3'),'Enable','On','Backgroundcolor',[1 1 1]);
                        end
                        if SYSTEM == 1
                            set(findobj(gcf,'Tag','sigc4'),'Enable','On','Backgroundcolor',[1 1 1]);  
                            set(findobj(gcf,'Tag','ac4'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','ec4'),'Enable','On','Backgroundcolor',[1 1 1]);                            
                        end                      
                    end
                    if SYSTEM > 2

                        set(findobj(gcf,'Tag','ec1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ec2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ec3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ec4b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ac4b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigc4b'),'Enable','On','Backgroundcolor',[1 1 1]);

                    end
                    
                end
            case 'phaseon'
                selp   = get(findobj(gcf,'Tag','phasesel'),'Value');
                if selp == 0
                    if SYSTEM ~=3
                        set(findobj(gcf,'Tag','ep1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ep2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ap1'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ap2'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','sigp1'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');
                        set(findobj(gcf,'Tag','sigp2'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.3');

                        if SYSTEM ~=2
                            set(findobj(gcf,'Tag','ep3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                            set(findobj(gcf,'Tag','ap3'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                            set(findobj(gcf,'Tag','sigp3'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                        end
                        if SYSTEM == 1
                            set(findobj(gcf,'Tag','ep4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                            set(findobj(gcf,'Tag','ap4'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                            set(findobj(gcf,'Tag','sigp4'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                        end

                    end
                    if SYSTEM > 2
                        set(findobj(gcf,'Tag','ep3b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ep4b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ap3b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ap4b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ep1b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ep2b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','10');
                        set(findobj(gcf,'Tag','ap1b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','ap2b'),'Enable','Off','Backgroundcolor',[.8 .8 .8],'String','0');
                        set(findobj(gcf,'Tag','sigp1b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                        set(findobj(gcf,'Tag','sigp2b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                        set(findobj(gcf,'Tag','sigp3b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                        set(findobj(gcf,'Tag','sigp4b'),'Enable','Off','Backgroundcolor',[0.8 0.8 0.8],'String','0.003');
                    end
                else

                    if SYSTEM ~=3
                        set(findobj(gcf,'Tag','ep1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ep2'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap2'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp1'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp2'),'Enable','On','Backgroundcolor',[1 1 1]);

                        if SYSTEM ~=2
                            set(findobj(gcf,'Tag','ep3'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','ap3'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','sigp3'),'Enable','On','Backgroundcolor',[1 1 1]);
                        end
                        if SYSTEM == 1
                            set(findobj(gcf,'Tag','sigp4'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','ap4'),'Enable','On','Backgroundcolor',[1 1 1]);
                            set(findobj(gcf,'Tag','ep4'),'Enable','On','Backgroundcolor',[1 1 1]);
                        end
                    end
                    if SYSTEM > 2

                        set(findobj(gcf,'Tag','ep1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ep2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ep3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ep4b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','ap4b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp1b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp2b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp3b'),'Enable','On','Backgroundcolor',[1 1 1]);
                        set(findobj(gcf,'Tag','sigp4b'),'Enable','On','Backgroundcolor',[1 1 1]);

                    end

                end
        end
    case 'nepochs'
        k = get(findobj(gcf,'Tag','nepochs'),'String');
        set(findobj(gcf,'Tag','startepoch'),'String',k);
        
  
        
    case 'rectype'
        SYSTEM = get(findobj(gcf,'Tag','system'),'Value');        
        if SYSTEM == 1
            switch option1
                case 'noncc'
                    set(findobj(gcf,'Tag','pL2L1'),'Value',0);
                case 'cc'
                    set(findobj(gcf,'Tag','pL2'),'Value',0);
            end
        end


        % call if ionosphere-weighted model is chosen
    case 'ionoweight'

        ic = get(findobj(gcf,'Tag','ioncase'),'Value');
        if ic == 3;
            set(findobj(gcf,'Tag','sigion'),'Enable','on');
            set(findobj(gcf,'Tag','baseline'),'Enable','on');
            set(findobj(gcf,'Tag','sdionweight'),'Enable','on','BackgroundColor',[1 1 1]);
            set(findobj(gcf,'Tag','blionweight'),'Enable','on','BackgroundColor',[1 1 1]);
        else
            set(findobj(gcf,'Tag','sigion'),'Enable','off');
            set(findobj(gcf,'Tag','baseline'),'Enable','off');
            set(findobj(gcf,'Tag','sdionweight'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set(findobj(gcf,'Tag','blionweight'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
        end

        switch option1

            case 'sigion'
                set(findobj(gcf,'Tag','sigion'),'Value',1);
                set(findobj(gcf,'Tag','baseline'),'Value',0);

            case 'baseline'
                set(findobj(gcf,'Tag','sigion'),'Value',0);
                set(findobj(gcf,'Tag','baseline'),'Value',1);

        end

        % call if troposphere-float model is chosen
    case 'tropo'

        tc = get(findobj(gcf,'Tag','tropocase'),'Value');
        if tc == 1 % tropo. fixed
            set(findobj(gcf,'Tag','mapfun'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
        else
            set(findobj(gcf,'Tag','mapfun'),'Enable','on','BackgroundColor',[1 1 1]);
        end

        % call if output parameter is chosen
    case 'output'

        ov = get(findobj(gcf,'Tag','output'),'Value');
        if ismember(ov,[1 2 3 5 6]) % if MDB, MDE or BNR

            set(findobj(gcf,'Tag','errtype'),'Enable','On','Value',2,'BackgroundColor',[1 1 1]);
            set(findobj(gcf,'Tag','outputfreq'),'Enable','On','Value',1,'BackgroundColor',[1 1 1]);
            set(findobj(gcf,'Tag','startepoch'),'Enable','On','BackgroundColor',[1 1 1]);
            
            if get(findobj(gcf,'Tag','system'),'Value')==3
                set(findobj(gcf,'Tag','outputfreq'),'String','E1|E6|E5b|E5a');
            elseif get(findobj(gcf,'Tag','system'),'Value')==4
                set(findobj(gcf,'Tag','outputfreq'),'String','L1|L2|L5|E1|E6|E5b|E5a');
            else
                set(findobj(gcf,'Tag','outputfreq'),'String','L1|L2|L5');
            end

        else
            set(findobj(gcf,'Tag','errtype'),'Enable','Off','Value',2);
            set(findobj(gcf,'Tag','outputfreq'),'Enable','Off','BackgroundColor',[0.8 0.8 0.8],'Value',1);
            set(findobj(gcf,'Tag','startepoch'),'Enable','Off','BackgroundColor',[0.8 0.8 0.8],'String','1');

        end

        % call if location is specified
    case 'location';

        locc = get(findobj(gcf,'Tag','locchoice'),'Value');
        if locc == 1

            if get(findobj(gcf,'Tag','point'),'Value')
                set (findobj(gcf,'Tag','long1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','long2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            else
                set (findobj(gcf,'Tag','long1'),'Enable','on','BackgroundColor',[1 1 1]);
                set (findobj(gcf,'Tag','lat1'),'Enable','on','BackgroundColor',[1 1 1]);
                set (findobj(gcf,'Tag','long2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            end

            set (findobj(gcf,'Tag','point'),'Enable','on');
            set (findobj(gcf,'Tag','type'),'Enable','on');
            set (findobj(gcf,'Tag','resol'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set (findobj(gcf,'Tag','plotnew'),'Enable','off');
        elseif locc == 2

            if get(findobj(gcf,'Tag','point'),'Value')
                set (findobj(gcf,'Tag','long1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','long2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            else
                set (findobj(gcf,'Tag','long1'),'Enable','on','BackgroundColor',[1 1 1]);
                set (findobj(gcf,'Tag','long2'),'Enable','on','BackgroundColor',[1 1 1]);
                set (findobj(gcf,'Tag','lat1'),'Enable','on','BackgroundColor',[1 1 1]);
                set (findobj(gcf,'Tag','lat2'),'Enable','on','BackgroundColor',[1 1 1]);
            end

            set (findobj(gcf,'Tag','point'),'Enable','on');
            set (findobj(gcf,'Tag','type'),'Enable','on');
            set (findobj(gcf,'Tag','resol'),'Enable','on','BackgroundColor',[1 1 1]);
            set (findobj(gcf,'Tag','plotnew'),'Enable','on');
            
        else

            set (findobj(gcf,'Tag','long1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set (findobj(gcf,'Tag','long2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set (findobj(gcf,'Tag','lat1'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set (findobj(gcf,'Tag','lat2'),'Enable','off','BackgroundColor',[0.8 0.8 0.8]);
            set (findobj(gcf,'Tag','point'),'Enable','off');
            set (findobj(gcf,'Tag','type'),'Enable','off');
            set (findobj(gcf,'Tag','resol'),'Enable','on','BackgroundColor',[1 1 1]);
            set (findobj(gcf,'Tag','plotnew'),'Enable','on');
        end

    case 'coordinates';
        locc = get (findobj(gcf,'Tag','locchoice'),'Value');
        switch option1;

            case 'point';


                set (findobj(gcf,'Tag','point'),'Value',1);
                set (findobj(gcf,'Tag','type'),'Value',0);
                set (findobj(gcf,'Tag','long1'),'Enable','off');
                set (findobj(gcf,'Tag','long2'),'Enable','off');
                set (findobj(gcf,'Tag','lat1'),'Enable','off');
                set (findobj(gcf,'Tag','lat2'),'Enable','off');
                set (findobj(gcf,'Tag','long1'),'BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat1'),'BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','long2'),'BackgroundColor',[0.8 0.8 0.8]);
                set (findobj(gcf,'Tag','lat2'),'BackgroundColor',[0.8 0.8 0.8]);

            case 'type';

                set (findobj(gcf,'Tag','point'),'Value',0);
                set (findobj(gcf,'Tag','type'),'Value',1);
                if locc == 2
                    set (findobj(gcf,'Tag','long1'),'Enable','on');
                    set (findobj(gcf,'Tag','long2'),'Enable','on');
                    set (findobj(gcf,'Tag','lat1'),'Enable','on');
                    set (findobj(gcf,'Tag','lat2'),'Enable','on');
                    set (findobj(gcf,'Tag','long1'),'BackgroundColor',[1 1 1]);
                    set (findobj(gcf,'Tag','long2'),'BackgroundColor',[1 1 1]);
                    set (findobj(gcf,'Tag','lat1'),'BackgroundColor',[1 1 1]);
                    set (findobj(gcf,'Tag','lat2'),'BackgroundColor',[1 1 1]);
                else
                    set (findobj(gcf,'Tag','long1'),'Enable','on');
                    set (findobj(gcf,'Tag','lat1'),'Enable','on');
                    set (findobj(gcf,'Tag','long1'),'BackgroundColor',[1 1 1]);
                    set (findobj(gcf,'Tag','lat1'),'BackgroundColor',[1 1 1]);
                    set (findobj(gcf,'Tag','long2'),'Enable','off');
                    set (findobj(gcf,'Tag','lat2'),'Enable','off');
                    set (findobj(gcf,'Tag','long2'),'BackgroundColor',[0.8 0.8 0.8]);
                    set (findobj(gcf,'Tag','lat2'),'BackgroundColor',[0.8 0.8 0.8]);
                end
        end

        % call if satellite tracks must be plotted
    case 'initialFigure'

        starttime  = [get(findobj(gcf,'Tag','startdate'),'String') ' ' ...
           get(findobj(gcf,'Tag','starttime'),'String')] ;
        endtime    = [get(findobj(gcf,'Tag','enddate'),'String') ' ' ...
           get(findobj(gcf,'Tag','endtime'),'String')] ;
        interval   = str2num(get(findobj(gcf,'Tag','intv'),'String'));

        almanac  = get(findobj(gcf,'Tag','almanac'),'String');
        SYSTEM = get(findobj(gcf,'Tag','system'),'Value');
        if  SYSTEM==4
            almanac2 = get(findobj(gcf,'Tag','almanac2'),'String');
            eph        = rdyuma(almanac);
            eph2       = rdyuma(almanac2);
            tsat = mktsat ( starttime,endtime,interval);
            [xs,ys,zs] = cpaziele (tsat,eph);
            [xs2,ys2,zs2] = cpaziele (tsat,eph2);
        else
            if strcmp(almanac(1:4),'yuma'), eph = rdyuma(almanac); else, eph=rxnav(almanac); end
            tsat = mktsat ( starttime,endtime,interval);
            [xs,ys,zs] = cpaziele (tsat,eph);
        end
        switch option1
            case 'now'
                satpos = datestr(now);
                titel  = ['satellite tracks for ' datestr(now,1)];
            case 'begin'
                satpos = starttime;
                axes(findobj(gcf,'Tag','ColorBarAxis'))
                set(gca,'visible','off');cla;
                titel  = ['satellite tracks for ' starttime(1:11)];
        end
        axes(findobj(gcf,'Tag','PictureAxis'));
        cla reset; hold on;
        set(gca,'Xgrid','on','Ygrid','on','Xtick',[-180:30:180],'Ytick',[-90:30:90], ...
            'Color',[1 1 1], 'XColor',[.8 .8 .8], 'YColor',[.8 .8 .8],...
            'Box','on','Visible','on','Tag','PictureAxis');
        plworldini(eph,tsat,xs,ys,zs,satpos,'r','r');
        if  SYSTEM==4
            plworldini(eph2,tsat,xs2,ys2,zs2,satpos,'b','b');
        end
        title(titel,'color',[1 1 1]);
        zoom on;

        % call if 'DEFAULTS' button is pushed
    case 'defaults'

        set(findobj(gcf,'Tag','system'),'value',1);
        set(findobj(gcf,'Tag','startdate'),'string',datestr(now,1));
        set(findobj(gcf,'Tag','starttime'),'string','0:00');        
        set(findobj(gcf,'Tag','endtime'),'string','24:00'); 
        set(findobj(gcf,'Tag','enddate'),'string',datestr(now,1));
        set(findobj(gcf,'Tag','nepochs'),'string','1');
        set(findobj(gcf,'Tag','intv'),'string','300');
        set(findobj(gcf,'Tag','codeonly'),'value',1);
        visual('syst');
        set(findobj(gcf,'Tag','cutoff'),'string','15');
        set(findobj(gcf,'Tag','scenario'),'value',2);
        set(findobj(gcf,'Tag','receiver'),'value',1);
        set(findobj(gcf,'Tag','locchoice'),'value',3);
        visual('location');
        set(findobj(gcf,'Tag','resol'),'string','5');
        set(findobj(gcf,'Tag','ioncase'),'value',1);
        visual('ionoweight');
        set(findobj(gcf,'Tag','tropocase'),'value',1);
        visual('tropo');
        set(findobj(gcf,'Tag','output'),'value',9);
        set(findobj(gcf,'Tag','outputfreq'),'String','L1|L2|L5');
        set(findobj(gcf,'Tag','startepoch'),'String','1');
        visual('output')
        visual('initialFigure','now');

        % call if 'HELP' button is pushed
    case 'info'

        helpwin ('visualhelp');

    otherwise
        error('Illegal action, visual ended');

end

